type Profile implements Node {
  id: ID!
  name: String!
  firstName: String
  lastName: String
  title: String!
  urn: String!
  country: String
  city: String
  educations: Map
  positions: Map
  skills: Map
  geoData: Map
  rawDataS3Key: String
  cleanedDataS3Key: String
  profileEntry: ProfileEntry

  sourceFile: String
  createdAt: String!
  updatedAt: String!
}

type ProfileConnection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [ProfileEdge]
}

type ProfileEdge {
  node: Profile
  cursor: Cursor!
}

type ProfileTitleGroup {
  title: String!
  count: Int!
}

input CreateProfileInput {
  name: String!
  title: String!
  urn: String!
  sourceFile: String!
}

input UpdateProfileInput {
  id: ID!
  name: String
  title: String
  urn: String
  sourceFile: String
}

extend type Query {
  profile(id: ID!): Profile
  profiles(
    after: Cursor
    first: Int
    before: Cursor
    last: Int
    where: ProfileWhereInput
  ): ProfileConnection
  profilesByTitle(searchTerm: String, minCount: Int!): [ProfileTitleGroup!]!
}

extend type Mutation {
  createProfile(input: CreateProfileInput!): Profile! @auth
  updateProfile(input: UpdateProfileInput!): Profile! @auth
}
