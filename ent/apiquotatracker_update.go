// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"sheng-go-backend/ent/apiquotatracker"
	"sheng-go-backend/ent/predicate"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
)

// APIQuotaTrackerUpdate is the builder for updating APIQuotaTracker entities.
type APIQuotaTrackerUpdate struct {
	config
	hooks    []Hook
	mutation *APIQuotaTrackerMutation
}

// Where appends a list predicates to the APIQuotaTrackerUpdate builder.
func (aqtu *APIQuotaTrackerUpdate) Where(ps ...predicate.APIQuotaTracker) *APIQuotaTrackerUpdate {
	aqtu.mutation.Where(ps...)
	return aqtu
}

// SetUpdatedAt sets the "updated_at" field.
func (aqtu *APIQuotaTrackerUpdate) SetUpdatedAt(t time.Time) *APIQuotaTrackerUpdate {
	aqtu.mutation.SetUpdatedAt(t)
	return aqtu
}

// SetMonth sets the "month" field.
func (aqtu *APIQuotaTrackerUpdate) SetMonth(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.ResetMonth()
	aqtu.mutation.SetMonth(i)
	return aqtu
}

// SetNillableMonth sets the "month" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableMonth(i *int) *APIQuotaTrackerUpdate {
	if i != nil {
		aqtu.SetMonth(*i)
	}
	return aqtu
}

// AddMonth adds i to the "month" field.
func (aqtu *APIQuotaTrackerUpdate) AddMonth(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.AddMonth(i)
	return aqtu
}

// SetYear sets the "year" field.
func (aqtu *APIQuotaTrackerUpdate) SetYear(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.ResetYear()
	aqtu.mutation.SetYear(i)
	return aqtu
}

// SetNillableYear sets the "year" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableYear(i *int) *APIQuotaTrackerUpdate {
	if i != nil {
		aqtu.SetYear(*i)
	}
	return aqtu
}

// AddYear adds i to the "year" field.
func (aqtu *APIQuotaTrackerUpdate) AddYear(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.AddYear(i)
	return aqtu
}

// SetCallCount sets the "call_count" field.
func (aqtu *APIQuotaTrackerUpdate) SetCallCount(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.ResetCallCount()
	aqtu.mutation.SetCallCount(i)
	return aqtu
}

// SetNillableCallCount sets the "call_count" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableCallCount(i *int) *APIQuotaTrackerUpdate {
	if i != nil {
		aqtu.SetCallCount(*i)
	}
	return aqtu
}

// AddCallCount adds i to the "call_count" field.
func (aqtu *APIQuotaTrackerUpdate) AddCallCount(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.AddCallCount(i)
	return aqtu
}

// SetQuotaLimit sets the "quota_limit" field.
func (aqtu *APIQuotaTrackerUpdate) SetQuotaLimit(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.ResetQuotaLimit()
	aqtu.mutation.SetQuotaLimit(i)
	return aqtu
}

// SetNillableQuotaLimit sets the "quota_limit" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableQuotaLimit(i *int) *APIQuotaTrackerUpdate {
	if i != nil {
		aqtu.SetQuotaLimit(*i)
	}
	return aqtu
}

// AddQuotaLimit adds i to the "quota_limit" field.
func (aqtu *APIQuotaTrackerUpdate) AddQuotaLimit(i int) *APIQuotaTrackerUpdate {
	aqtu.mutation.AddQuotaLimit(i)
	return aqtu
}

// SetQuotaExceeded sets the "quota_exceeded" field.
func (aqtu *APIQuotaTrackerUpdate) SetQuotaExceeded(b bool) *APIQuotaTrackerUpdate {
	aqtu.mutation.SetQuotaExceeded(b)
	return aqtu
}

// SetNillableQuotaExceeded sets the "quota_exceeded" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableQuotaExceeded(b *bool) *APIQuotaTrackerUpdate {
	if b != nil {
		aqtu.SetQuotaExceeded(*b)
	}
	return aqtu
}

// SetOverrideEnabled sets the "override_enabled" field.
func (aqtu *APIQuotaTrackerUpdate) SetOverrideEnabled(b bool) *APIQuotaTrackerUpdate {
	aqtu.mutation.SetOverrideEnabled(b)
	return aqtu
}

// SetNillableOverrideEnabled sets the "override_enabled" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableOverrideEnabled(b *bool) *APIQuotaTrackerUpdate {
	if b != nil {
		aqtu.SetOverrideEnabled(*b)
	}
	return aqtu
}

// SetNotificationSent sets the "notification_sent" field.
func (aqtu *APIQuotaTrackerUpdate) SetNotificationSent(b bool) *APIQuotaTrackerUpdate {
	aqtu.mutation.SetNotificationSent(b)
	return aqtu
}

// SetNillableNotificationSent sets the "notification_sent" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableNotificationSent(b *bool) *APIQuotaTrackerUpdate {
	if b != nil {
		aqtu.SetNotificationSent(*b)
	}
	return aqtu
}

// SetLastCallAt sets the "last_call_at" field.
func (aqtu *APIQuotaTrackerUpdate) SetLastCallAt(t time.Time) *APIQuotaTrackerUpdate {
	aqtu.mutation.SetLastCallAt(t)
	return aqtu
}

// SetNillableLastCallAt sets the "last_call_at" field if the given value is not nil.
func (aqtu *APIQuotaTrackerUpdate) SetNillableLastCallAt(t *time.Time) *APIQuotaTrackerUpdate {
	if t != nil {
		aqtu.SetLastCallAt(*t)
	}
	return aqtu
}

// ClearLastCallAt clears the value of the "last_call_at" field.
func (aqtu *APIQuotaTrackerUpdate) ClearLastCallAt() *APIQuotaTrackerUpdate {
	aqtu.mutation.ClearLastCallAt()
	return aqtu
}

// Mutation returns the APIQuotaTrackerMutation object of the builder.
func (aqtu *APIQuotaTrackerUpdate) Mutation() *APIQuotaTrackerMutation {
	return aqtu.mutation
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (aqtu *APIQuotaTrackerUpdate) Save(ctx context.Context) (int, error) {
	aqtu.defaults()
	return withHooks(ctx, aqtu.sqlSave, aqtu.mutation, aqtu.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (aqtu *APIQuotaTrackerUpdate) SaveX(ctx context.Context) int {
	affected, err := aqtu.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (aqtu *APIQuotaTrackerUpdate) Exec(ctx context.Context) error {
	_, err := aqtu.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (aqtu *APIQuotaTrackerUpdate) ExecX(ctx context.Context) {
	if err := aqtu.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (aqtu *APIQuotaTrackerUpdate) defaults() {
	if _, ok := aqtu.mutation.UpdatedAt(); !ok {
		v := apiquotatracker.UpdateDefaultUpdatedAt()
		aqtu.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (aqtu *APIQuotaTrackerUpdate) check() error {
	if v, ok := aqtu.mutation.Month(); ok {
		if err := apiquotatracker.MonthValidator(v); err != nil {
			return &ValidationError{Name: "month", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.month": %w`, err)}
		}
	}
	if v, ok := aqtu.mutation.Year(); ok {
		if err := apiquotatracker.YearValidator(v); err != nil {
			return &ValidationError{Name: "year", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.year": %w`, err)}
		}
	}
	if v, ok := aqtu.mutation.CallCount(); ok {
		if err := apiquotatracker.CallCountValidator(v); err != nil {
			return &ValidationError{Name: "call_count", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.call_count": %w`, err)}
		}
	}
	if v, ok := aqtu.mutation.QuotaLimit(); ok {
		if err := apiquotatracker.QuotaLimitValidator(v); err != nil {
			return &ValidationError{Name: "quota_limit", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.quota_limit": %w`, err)}
		}
	}
	return nil
}

func (aqtu *APIQuotaTrackerUpdate) sqlSave(ctx context.Context) (n int, err error) {
	if err := aqtu.check(); err != nil {
		return n, err
	}
	_spec := sqlgraph.NewUpdateSpec(apiquotatracker.Table, apiquotatracker.Columns, sqlgraph.NewFieldSpec(apiquotatracker.FieldID, field.TypeString))
	if ps := aqtu.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := aqtu.mutation.UpdatedAt(); ok {
		_spec.SetField(apiquotatracker.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := aqtu.mutation.Month(); ok {
		_spec.SetField(apiquotatracker.FieldMonth, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.AddedMonth(); ok {
		_spec.AddField(apiquotatracker.FieldMonth, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.Year(); ok {
		_spec.SetField(apiquotatracker.FieldYear, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.AddedYear(); ok {
		_spec.AddField(apiquotatracker.FieldYear, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.CallCount(); ok {
		_spec.SetField(apiquotatracker.FieldCallCount, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.AddedCallCount(); ok {
		_spec.AddField(apiquotatracker.FieldCallCount, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.QuotaLimit(); ok {
		_spec.SetField(apiquotatracker.FieldQuotaLimit, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.AddedQuotaLimit(); ok {
		_spec.AddField(apiquotatracker.FieldQuotaLimit, field.TypeInt, value)
	}
	if value, ok := aqtu.mutation.QuotaExceeded(); ok {
		_spec.SetField(apiquotatracker.FieldQuotaExceeded, field.TypeBool, value)
	}
	if value, ok := aqtu.mutation.OverrideEnabled(); ok {
		_spec.SetField(apiquotatracker.FieldOverrideEnabled, field.TypeBool, value)
	}
	if value, ok := aqtu.mutation.NotificationSent(); ok {
		_spec.SetField(apiquotatracker.FieldNotificationSent, field.TypeBool, value)
	}
	if value, ok := aqtu.mutation.LastCallAt(); ok {
		_spec.SetField(apiquotatracker.FieldLastCallAt, field.TypeTime, value)
	}
	if aqtu.mutation.LastCallAtCleared() {
		_spec.ClearField(apiquotatracker.FieldLastCallAt, field.TypeTime)
	}
	if n, err = sqlgraph.UpdateNodes(ctx, aqtu.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{apiquotatracker.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	aqtu.mutation.done = true
	return n, nil
}

// APIQuotaTrackerUpdateOne is the builder for updating a single APIQuotaTracker entity.
type APIQuotaTrackerUpdateOne struct {
	config
	fields   []string
	hooks    []Hook
	mutation *APIQuotaTrackerMutation
}

// SetUpdatedAt sets the "updated_at" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetUpdatedAt(t time.Time) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.SetUpdatedAt(t)
	return aqtuo
}

// SetMonth sets the "month" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetMonth(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.ResetMonth()
	aqtuo.mutation.SetMonth(i)
	return aqtuo
}

// SetNillableMonth sets the "month" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableMonth(i *int) *APIQuotaTrackerUpdateOne {
	if i != nil {
		aqtuo.SetMonth(*i)
	}
	return aqtuo
}

// AddMonth adds i to the "month" field.
func (aqtuo *APIQuotaTrackerUpdateOne) AddMonth(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.AddMonth(i)
	return aqtuo
}

// SetYear sets the "year" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetYear(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.ResetYear()
	aqtuo.mutation.SetYear(i)
	return aqtuo
}

// SetNillableYear sets the "year" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableYear(i *int) *APIQuotaTrackerUpdateOne {
	if i != nil {
		aqtuo.SetYear(*i)
	}
	return aqtuo
}

// AddYear adds i to the "year" field.
func (aqtuo *APIQuotaTrackerUpdateOne) AddYear(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.AddYear(i)
	return aqtuo
}

// SetCallCount sets the "call_count" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetCallCount(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.ResetCallCount()
	aqtuo.mutation.SetCallCount(i)
	return aqtuo
}

// SetNillableCallCount sets the "call_count" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableCallCount(i *int) *APIQuotaTrackerUpdateOne {
	if i != nil {
		aqtuo.SetCallCount(*i)
	}
	return aqtuo
}

// AddCallCount adds i to the "call_count" field.
func (aqtuo *APIQuotaTrackerUpdateOne) AddCallCount(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.AddCallCount(i)
	return aqtuo
}

// SetQuotaLimit sets the "quota_limit" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetQuotaLimit(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.ResetQuotaLimit()
	aqtuo.mutation.SetQuotaLimit(i)
	return aqtuo
}

// SetNillableQuotaLimit sets the "quota_limit" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableQuotaLimit(i *int) *APIQuotaTrackerUpdateOne {
	if i != nil {
		aqtuo.SetQuotaLimit(*i)
	}
	return aqtuo
}

// AddQuotaLimit adds i to the "quota_limit" field.
func (aqtuo *APIQuotaTrackerUpdateOne) AddQuotaLimit(i int) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.AddQuotaLimit(i)
	return aqtuo
}

// SetQuotaExceeded sets the "quota_exceeded" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetQuotaExceeded(b bool) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.SetQuotaExceeded(b)
	return aqtuo
}

// SetNillableQuotaExceeded sets the "quota_exceeded" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableQuotaExceeded(b *bool) *APIQuotaTrackerUpdateOne {
	if b != nil {
		aqtuo.SetQuotaExceeded(*b)
	}
	return aqtuo
}

// SetOverrideEnabled sets the "override_enabled" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetOverrideEnabled(b bool) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.SetOverrideEnabled(b)
	return aqtuo
}

// SetNillableOverrideEnabled sets the "override_enabled" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableOverrideEnabled(b *bool) *APIQuotaTrackerUpdateOne {
	if b != nil {
		aqtuo.SetOverrideEnabled(*b)
	}
	return aqtuo
}

// SetNotificationSent sets the "notification_sent" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNotificationSent(b bool) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.SetNotificationSent(b)
	return aqtuo
}

// SetNillableNotificationSent sets the "notification_sent" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableNotificationSent(b *bool) *APIQuotaTrackerUpdateOne {
	if b != nil {
		aqtuo.SetNotificationSent(*b)
	}
	return aqtuo
}

// SetLastCallAt sets the "last_call_at" field.
func (aqtuo *APIQuotaTrackerUpdateOne) SetLastCallAt(t time.Time) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.SetLastCallAt(t)
	return aqtuo
}

// SetNillableLastCallAt sets the "last_call_at" field if the given value is not nil.
func (aqtuo *APIQuotaTrackerUpdateOne) SetNillableLastCallAt(t *time.Time) *APIQuotaTrackerUpdateOne {
	if t != nil {
		aqtuo.SetLastCallAt(*t)
	}
	return aqtuo
}

// ClearLastCallAt clears the value of the "last_call_at" field.
func (aqtuo *APIQuotaTrackerUpdateOne) ClearLastCallAt() *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.ClearLastCallAt()
	return aqtuo
}

// Mutation returns the APIQuotaTrackerMutation object of the builder.
func (aqtuo *APIQuotaTrackerUpdateOne) Mutation() *APIQuotaTrackerMutation {
	return aqtuo.mutation
}

// Where appends a list predicates to the APIQuotaTrackerUpdate builder.
func (aqtuo *APIQuotaTrackerUpdateOne) Where(ps ...predicate.APIQuotaTracker) *APIQuotaTrackerUpdateOne {
	aqtuo.mutation.Where(ps...)
	return aqtuo
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (aqtuo *APIQuotaTrackerUpdateOne) Select(field string, fields ...string) *APIQuotaTrackerUpdateOne {
	aqtuo.fields = append([]string{field}, fields...)
	return aqtuo
}

// Save executes the query and returns the updated APIQuotaTracker entity.
func (aqtuo *APIQuotaTrackerUpdateOne) Save(ctx context.Context) (*APIQuotaTracker, error) {
	aqtuo.defaults()
	return withHooks(ctx, aqtuo.sqlSave, aqtuo.mutation, aqtuo.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (aqtuo *APIQuotaTrackerUpdateOne) SaveX(ctx context.Context) *APIQuotaTracker {
	node, err := aqtuo.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (aqtuo *APIQuotaTrackerUpdateOne) Exec(ctx context.Context) error {
	_, err := aqtuo.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (aqtuo *APIQuotaTrackerUpdateOne) ExecX(ctx context.Context) {
	if err := aqtuo.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (aqtuo *APIQuotaTrackerUpdateOne) defaults() {
	if _, ok := aqtuo.mutation.UpdatedAt(); !ok {
		v := apiquotatracker.UpdateDefaultUpdatedAt()
		aqtuo.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (aqtuo *APIQuotaTrackerUpdateOne) check() error {
	if v, ok := aqtuo.mutation.Month(); ok {
		if err := apiquotatracker.MonthValidator(v); err != nil {
			return &ValidationError{Name: "month", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.month": %w`, err)}
		}
	}
	if v, ok := aqtuo.mutation.Year(); ok {
		if err := apiquotatracker.YearValidator(v); err != nil {
			return &ValidationError{Name: "year", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.year": %w`, err)}
		}
	}
	if v, ok := aqtuo.mutation.CallCount(); ok {
		if err := apiquotatracker.CallCountValidator(v); err != nil {
			return &ValidationError{Name: "call_count", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.call_count": %w`, err)}
		}
	}
	if v, ok := aqtuo.mutation.QuotaLimit(); ok {
		if err := apiquotatracker.QuotaLimitValidator(v); err != nil {
			return &ValidationError{Name: "quota_limit", err: fmt.Errorf(`ent: validator failed for field "APIQuotaTracker.quota_limit": %w`, err)}
		}
	}
	return nil
}

func (aqtuo *APIQuotaTrackerUpdateOne) sqlSave(ctx context.Context) (_node *APIQuotaTracker, err error) {
	if err := aqtuo.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(apiquotatracker.Table, apiquotatracker.Columns, sqlgraph.NewFieldSpec(apiquotatracker.FieldID, field.TypeString))
	id, ok := aqtuo.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "APIQuotaTracker.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := aqtuo.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, apiquotatracker.FieldID)
		for _, f := range fields {
			if !apiquotatracker.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != apiquotatracker.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := aqtuo.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := aqtuo.mutation.UpdatedAt(); ok {
		_spec.SetField(apiquotatracker.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := aqtuo.mutation.Month(); ok {
		_spec.SetField(apiquotatracker.FieldMonth, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.AddedMonth(); ok {
		_spec.AddField(apiquotatracker.FieldMonth, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.Year(); ok {
		_spec.SetField(apiquotatracker.FieldYear, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.AddedYear(); ok {
		_spec.AddField(apiquotatracker.FieldYear, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.CallCount(); ok {
		_spec.SetField(apiquotatracker.FieldCallCount, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.AddedCallCount(); ok {
		_spec.AddField(apiquotatracker.FieldCallCount, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.QuotaLimit(); ok {
		_spec.SetField(apiquotatracker.FieldQuotaLimit, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.AddedQuotaLimit(); ok {
		_spec.AddField(apiquotatracker.FieldQuotaLimit, field.TypeInt, value)
	}
	if value, ok := aqtuo.mutation.QuotaExceeded(); ok {
		_spec.SetField(apiquotatracker.FieldQuotaExceeded, field.TypeBool, value)
	}
	if value, ok := aqtuo.mutation.OverrideEnabled(); ok {
		_spec.SetField(apiquotatracker.FieldOverrideEnabled, field.TypeBool, value)
	}
	if value, ok := aqtuo.mutation.NotificationSent(); ok {
		_spec.SetField(apiquotatracker.FieldNotificationSent, field.TypeBool, value)
	}
	if value, ok := aqtuo.mutation.LastCallAt(); ok {
		_spec.SetField(apiquotatracker.FieldLastCallAt, field.TypeTime, value)
	}
	if aqtuo.mutation.LastCallAtCleared() {
		_spec.ClearField(apiquotatracker.FieldLastCallAt, field.TypeTime)
	}
	_node = &APIQuotaTracker{config: aqtuo.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, aqtuo.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{apiquotatracker.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	aqtuo.mutation.done = true
	return _node, nil
}
